# name: Deploy Production Theme

# on:
#   push:
#     branches:
#       - master

# jobs:
#   deploy:
#     name: Deploy Production Theme
#     runs-on: ubuntu-latest
#     steps:
#       # basically git clone
#       - uses: actions/checkout@v2
#       # deploy shopify theme
#       - uses: pgrimaud/action-shopify@2.1.3
#         env:
#           SHOPIFY_PASSWORD: ${{ secrets.SHOPIFY_PRODUCTION_PASSWORD }}
#           SHOPIFY_STORE_URL: ${{ secrets.SHOPIFY_PRODUCTION_STORE_URL }}
#           SHOPIFY_THEME_ID: ${{ secrets.SHOPIFY_PRODUCTION_THEME_ID }}
#           THEME_PATH: ${{ secrets.THEME_PATH }}
#         with:
#           args: --ignored-file=config/settings_data.json --ignored-file=locales/* --


name: Theme Deploy

on: 
  push:
    branches:
      - master

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout the repository
      - uses: actions/checkout@v2

      # Step 2: Install Shopify CLI
      - name: Install Shopify CLI
        run: npm install -g @shopify/cli

      # Step 3: Upload theme
      - name: Upload Theme to Shopify
        env:
          SHOPIFY_STORE: ${{ secrets.SHOPIFY_STORE }}
          SHOPIFY_THEME_ID: ${{ secrets.SHOPIFY_THEME_ID }}
          SHOPIFY_CLI_THEME_TOKEN: ${{ secrets.SHOPIFY_CLI_THEME_TOKEN }}
        run: |
          shopify theme push \
            --theme $SHOPIFY_THEME_ID \
            --store $SHOPIFY_STORE \
            --password $SHOPIFY_CLI_THEME_TOKEN \
            -a \
            --json
